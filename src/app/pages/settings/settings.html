<!-- <div>
    <div>
        <button (click)="userService.deleteUser(user!.id)">Eliminar Usuario</button>
        <button routerLink='/edituser'>Editar</button>
    </div>
    <div>
        <span>Restaurante: {{user!.restaurantName}} </span>
        <span>üìç {{user?.address}}</span>
        <span>üìû {{user?.phoneNumber}}</span>
        <span>üßë‚Äçüç≥ {{user?.firstName}} {{user?.lastName}}</span>
        <span></span>
    </div>
</div> -->

<div class="edit-profile-container">
  <div class="edit-profile-tarjeta">
    <h1>Editar Perfil</h1>
    
    @if (cargando) {
      <p class="loading">Cargando informaci√≥n...</p>
    } @else if (usuario) {
      <form #editUserForm="ngForm" (ngSubmit)="editProfile(editUserForm)">
        
        <div>
          <label for="restaurantName">Nombre del restaurante</label>
          <input id="restaurantName" name="restaurantName" type="text" minlength="2" ngModel="{{usuario.restaurantName}}"
            #restaurantName="ngModel" 
            required>
          @if (restaurantName.invalid && !restaurantName.pristine) {
            <p class="error">Debe colocar un nombre de restaurante.</p>
          }
        </div>

        <div>
          <label for="firstName">Nombre</label>
          <input 
            id="firstName" 
            name="firstName" 
            type="text" 
            ngModel="{{usuario.firstName}}"
            #firstName="ngModel" 
            required
            autocomplete="given-name" 
            minlength="2" 
            maxlength="15">
          @if (firstName.invalid && !firstName.pristine) {
            <p class="error">Debe ingresar su nombre.</p>
          }
        </div>

        <div>
          <label for="lastName">Apellido</label>
          <input 
            id="lastName" 
            name="lastName" 
            type="text" 
            ngModel="{{usuario.lastName}}"
            #lastName="ngModel" 
            required
            autocomplete="family-name" 
            minlength="2" 
            maxlength="20">
          @if (lastName.invalid && !lastName.pristine) {
            <p class="error">Debe ingresar su apellido.</p>
          }
        </div>

        <div>
          <label for="phoneNumber">Tel√©fono</label>
          <input 
            id="phoneNumber" 
            name="phoneNumber" 
            type="text" 
            ngModel="{{usuario.phoneNumber}}"
            #phoneNumber="ngModel" 
            required
            minlength="3" 
            maxlength="30">
          @if (phoneNumber.invalid && !phoneNumber.pristine) {
            <p class="error">Debe ingresar un tel√©fono v√°lido.</p>
          }
        </div>

        <div>
          <label for="address">Direcci√≥n</label>
          <input 
            id="address" 
            name="address" 
            type="text" 
            ngModel="{{usuario.address}}"
            #address="ngModel" 
            required
            minlength="5" 
            autocomplete="address-level1">
          @if (address.invalid && !address.pristine) {
            <p class="error">Debe ingresar una direcci√≥n v√°lida.</p>
          }
        </div>

        <div class="password-section">
          <p class="password-info">Dejar vac√≠o si no desea cambiar la contrase√±a</p>
          
          <div>
            <label for="password">Nueva contrase√±a</label>
            <input id="password" name="password" type="password" ngModel #password="ngModel" 
              minlength="8"
              autocomplete="new-password">
            @if (password.invalid && !password.pristine) {
              <p class="error">Debe colocar una contrase√±a de al menos 8 caracteres.</p>
            }
          </div>

          <div>
            <label for="password2">Confirmar nueva contrase√±a</label>
            <input 
              id="password2" 
              name="password2" 
              type="password" 
              ngModel
              #password2="ngModel" 
              minlength="8">
            @if (password.value && password2.value && password.value !== password2.value) {
              <p class="error">Las contrase√±as no coinciden.</p>
            }
          </div>
        </div>

        <div class="form-actions">
          <button type="submit" [disabled]="isLoading || editForm.invalid">
            {{ isLoading ? 'Guardando...' : 'Guardar cambios' }}
          </button>
          <button type="button" class="btn-cancel" (click)="cancel()" [disabled]="isLoading">
            Cancelar
          </button>
        </div>

        @if (error) {
          <p class="error">{{ error }}</p>
        }
        @if (success) {
          <p class="success">Perfil actualizado correctamente.</p>
        }
      </form>

      <div class="danger-zone">
        <h3>Zona de Peligro</h3>
        <p>Una vez que elimines tu cuenta, no hay vuelta atr√°s. Por favor, aseg√∫rate.</p>
        <button type="button" class="btn-delete" (click)="openDeleteConfirm()">
          Eliminar cuenta
        </button>
      </div>

      @if (showDeleteConfirm) {
        <div class="delete-confirmation">
          <div class="confirmation-content">
            <h3>¬øEst√°s seguro?</h3>
            <p>Esta acci√≥n es irreversible. Se eliminar√° tu cuenta y todos tus datos.</p>
            <div class="confirmation-actions">
              <button type="button" class="btn-confirm-delete" (click)="deleteProfile()">
                S√≠, eliminar mi cuenta
              </button>
              <button type="button" class="btn-cancel" (click)="closeDeleteConfirm()">
                Cancelar
              </button>
            </div>
          </div>
        </div>
      }
    } @else {
      <p class="error">No se pudo cargar la informaci√≥n del usuario.</p>
    }
  </div>
</div>
